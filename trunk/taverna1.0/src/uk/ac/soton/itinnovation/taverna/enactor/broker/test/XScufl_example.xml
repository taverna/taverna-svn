<?xml version="1.0" encoding="UTF-8"?>
<s:scufl xmlns:s="http://org.embl.ebi.escience/xscufl/0.1alpha" version="0.1">
 
  <s:processor name="seqret">
    <s:soaplabwsdl>http://industry.ebi.ac.uk/soap/soaplab/edit::seqret</s:soaplabwsdl>
  </s:processor>
  <s:processor name="getorf">
    <s:soaplabwsdl>http://industry.ebi.ac.uk/soap/soaplab/nucleic_gene_finding::getorf</s:soaplabwsdl>
  </s:processor>
  <s:link>
    <s:input>getorf:sequence_direct_data</s:input>
    <s:output>seqret:outseq</s:output>
  </s:link>
  <s:processor name="transeq">
    <s:soaplabwsdl>http://industry.ebi.ac.uk/soap/soaplab/nucleic_translation::transeq</s:soaplabwsdl>
  </s:processor>
  <s:link>
    <s:input>transeq:sequence_direct_data</s:input>
    <s:output>getorf:outseq</s:output>
  </s:link>
  
  <s:processor name="seqret2">
    <s:soaplabwsdl>http://industry.ebi.ac.uk/soap/soaplab/edit::seqret</s:soaplabwsdl>
  </s:processor>
  <s:processor name="emma">
    <s:soaplabwsdl>http://industry.ebi.ac.uk/soap/soaplab/alignment_multiple::emma</s:soaplabwsdl>
  </s:processor>
  <s:link>
    <s:input>emma:inseqs_direct_data</s:input>
    <s:output>seqret2:outseq</s:output>
  </s:link>
  <s:processor name="prophecy">
    <s:soaplabwsdl>http://industry.ebi.ac.uk/soap/soaplab/nucleic_profiles::prophecy</s:soaplabwsdl>
  </s:processor>
  <s:link>
    <s:input>prophecy:sequence_direct_data</s:input>
    <s:output>emma:outseq</s:output>
  </s:link>
  <s:processor name="prophet">
    <s:soaplabwsdl>http://industry.ebi.ac.uk/soap/soaplab/nucleic_profiles::prophet</s:soaplabwsdl>
  </s:processor>
  <s:link>
    <s:input>prophet:sequence_direct_data</s:input>
    <s:output>transeq:outseq</s:output>
  </s:link>
  <s:link>
    <s:input>prophet:infile_direct_data</s:input>
    <s:output>prophecy:outf</s:output>
  </s:link>
  <s:processor name="plotorf">
    <s:soaplabwsdl>http://industry.ebi.ac.uk/soap/soaplab/nucleic_gene_finding::plotorf</s:soaplabwsdl>
  </s:processor>
  <s:link>
    <s:input>plotorf:sequence_direct_data</s:input>
    <s:output>seqret:outseq</s:output>
  </s:link>

<s:external name="sequenceusa">seqret:sequence_usa</s:external>
  <s:external name="orfminsize">getorf:minsize</s:external>
  <s:external name="orffind">getorf:find</s:external>
  <s:external name="sequenceRelated">seqret2:sequence_usa</s:external>
  <s:external name="prophecyType">prophecy:type</s:external>
  <s:external name="outfile">prophet:outfile</s:external>

<!-- following is an alternative wsdl based workflow for doing prophet alone but using data generated from above -->


<s:processor name="prophetCreateJob">
  <s:arbitrarywsdl>
  <s:wsdl>http://industry.ebi.ac.uk/soaplab/wsdl/nucleic_profiles__prophet__derived.wsdl</s:wsdl>
  <s:portType>nucleic_profiles__prophet</s:portType>
  <s:operation>createEmptyJob</s:operation>
  </s:arbitrarywsdl>
  </s:processor>

  <s:link>
  <s:input>prophetSetInput1:jobId</s:input>
  <s:output>prophetCreateJob:return</s:output>
  </s:link>

  <s:link>
  <s:input>prophetSetInput1:value</s:input>
  <s:output>transeq:sequence_direct_data</s:output>
  </s:link>

  <s:processor name="prophetSetInput1">
  <s:arbitrarywsdl>
  <s:wsdl>http://industry.ebi.ac.uk/soaplab/wsdl/nucleic_profiles__prophet__derived.wsdl</s:wsdl>
  <s:portType>nucleic_profiles__prophet</s:portType>
  <s:operation>set_sequence_direct_data</s:operation>
  </s:arbitrarywsdl>
  </s:processor>
  
  <s:link>
  <s:input>prophetSetInput2:jobId</s:input>
  <s:output>prophetCreateJob:return</s:output>
  </s:link>

  <s:link>
  <s:input>prophetSetInput2:value</s:input>
  <s:output>prophecy:get_outfReturn</s:output>
  </s:link>

  <s:processor name="prophetSetInput2">
  <s:arbitrarywsdl>
  <s:wsdl>http://industry.ebi.ac.uk/soaplab/wsdl/nucleic_profiles__prophet__derived.wsdl</s:wsdl>
  <s:portType>nucleic_profiles__prophet</s:portType>
  <s:operation>set_infile_direct_data</s:operation>
  </s:arbitrarywsdl>
  </s:processor>

  <s:link>
  <s:input>prophetRun:jobId</s:input>
  <s:output>prophetCreateJob:return</s:output>
  </s:link>

  <s:processor name="prophetRun">
  <s:arbitrarywsdl>
  <s:wsdl>http://industry.ebi.ac.uk/soaplab/wsdl/nucleic_profiles__prophet__derived.wsdl</s:wsdl>
    <s:portType>soaplab_nucleic_gene_finding_plotorf</s:portType>
    <s:operation>run</s:operation>
  </s:arbitrarywsdl>
  </s:processor>

  <s:link>
  <s:input>prophetWait:jobId</s:input>
  <s:output>prophetCreateJob:return</s:output>
  </s:link>

  <s:processor name="prophetWait">
  <s:arbitrarywsdl>
  <s:wsdl>http://industry.ebi.ac.uk/soaplab/wsdl/nucleic_profiles__prophet__derived.wsdl</s:wsdl>
    <s:portType>nucleic_profiles__prophet</s:portType>
    <s:operation>waitFor</s:operation>
  </s:arbitrarywsdl>
  </s:processor>

  <s:link>
  <s:input>prophetGetResults:jobId</s:input>
  <s:output>prophetCreateJob:return</s:output>
  </s:link>

  <s:processor name="prophetGetResults">
  <s:arbitrarywsdl>
  <s:wsdl>http://industry.ebi.ac.uk/soaplab/wsdl/nucleic_profiles__prophet__derived.wsdl</s:wsdl>
  <s:portType>nucleic_profiles__prophet</s:portType>
  <s:operation>get_outfile</s:operation>
  </s:arbitrarywsdl>
  </s:processor>
  
  <s:link>
  <s:input>prophetDeleteJob:jobId</s:input>
  <s:output>prophetCreateJob:return</s:output>
  </s:link>

  <s:processor name="prophetDeleteJob">
  <s:arbitrarywsdl>
  <s:wsdl>http://industry.ebi.ac.uk/soaplab/wsdl/nucleic_profiles__prophet__derived.wsdl</s:wsdl>
  <s:portType>nucleic_profiles__prophet</s:portType>
  <s:operation>destroy</s:operation>
  </s:arbitrarywsdl>
  </s:processor>

  <s:external name="outfile2">prophetGetResults:outfile</s:external>


</s:scufl>
