<link href="styles.css" rel="stylesheet" type="text/css"> 
<h1>API Consumer 1.0 User Manual</h1>
<p align="left"><a href="mailto:tmo@ebi.ac.uk"><em>tmo@ebi.ac.uk</em></a><em>, 
  28<sup>th</sup> April 2005</em></p>
<p>The API Consumer allows the selection of subsets of Java APIs which may then 
  be imported into Taverna's workbench software and used as components within 
  workflows in that environment. This tool is intended for API developers rather 
  than end users, it produces an XML API definition file which Taverna imports 
  - it is this file that you can distribute alongside or within your API to 'Taverna 
  enable' it.</p>
<h2>Prerequisites</h2>
<p>The API Consumer is a Java Doclet and uses Ant to launch, you must therefore 
  have a Java JDK and Ant installed and available on the path. In addition the 
  '<strong>tools.jar</strong>' file from the JDK must be available on the classpath, 
  you can copy it into the<strong> jre/lib/ext</strong> directory within your 
  JDK installation with no unpleasant side effects. As with Taverna this has been 
  tested on Java 1.4.2, use other versions at your own risk.</p>
<h2>Setup</h2>
<p>Before running the API Consumer you need to place any target source files within 
  the 'target' directory and any supporting libraries required in the 'lib' directory. 
  This is particularly important - if your API includes methods which consume 
  or return a type that isn't available to the API Consumer the definitions it 
  generates will be invalid. For example, if your API contains a method '<strong>void 
  foo(<em>MagicClass</em> bar)</strong>' and the <strong>MagicClass</strong> is 
  in some random package in a third party jar file that you haven't included there's 
  no way for the doclet to know the fully qualified classname of <strong>MagicClass</strong>. 
  As Taverna's plugin requires full classnames this will result in an API that 
  can't be invoked from the workflow. You can normally trap these issues by watching 
  for the standard javadoc warning messages in the console.</p>
<h2>Usage</h2>
<p>Once your source and any supporting files are present as described above you 
  can either call ant directly (just type 'ant' on the command line while in the 
  API consumer directory) or, on windows machines, by running the 'runme.bat' 
  file. The API consumer itself will be built from source and applied to the target 
  source files, after some slight delay for this process (longer for very complex 
  APIs) you should see a screen such as the following:</p>
<p><img src="images/InitialWindow.png" width="642" height="354"></p>
<p>The tree on the left hand side of the window shows the available classes (including 
  inner classes where present) along with a search box - the right hand side currently 
  shows nothing. Selecting a class from the tree produces a display like the following, 
  this should be clearly similar to the information produced by the standard javadoc 
  tool:</p>
<p><img src="images/SummaryDisplay.png" width="890" height="475"></p>
<p>In the case of large APIs the search box can be used to display a subset of 
  the complete class tree - enter a pattern to match and hit return in this text 
  box and the tree will be expanded to show all matching nodes. To return to the 
  view with all nodes expanded clear the text in this box and hit return.</p>
<h3>Adding methods to the API definition</h3>
<p>The next step is to select methods to add to the API definition - these methods 
  (static, instance or constructors) will appear as components within Taverna's 
  workbench when the definition file is imported.</p>
<h4>Using Graphical Interface</h4>
<p>Methods can be manually added by choosing the class, opening the '<strong>Methods</strong>' 
  tab and either selecting individual methods or using the '<strong>Select all</strong>' 
  and '<strong>Clear all</strong>' boxes:</p>
<p><img src="images/Methods.png" width="913" height="357"></p>
<h4>Using JavaDoc tags</h4>
<p>For APIs under your direct control there is an alternative based on JavaDoc 
  tags. By adding the tag '@taverna.consume' to either classes or individual methods 
  you can automatically have these methods selected in the API consumer when it 
  first scans the source files. In the case of the tag at a class or interface 
  level all constructors and methods will be selected.</p>
<h3>API Level metadata</h3>
<p>To aid use of your exported API you can select the '<strong>API Description</strong>' 
  tab and use it to provide a name and description for the entire API subset:</p>
<p><img src="images/Description.png" width="664" height="357"></p>
<h3>Saving the API definition file</h3>
<p>To save the API definition select the '<strong>File</strong>' -&gt; '<strong>Save 
  as XML</strong>'. This should bring up a standard save dialogue, choose a filename 
  and save. This is the file that is then imported into Taverna's scavenger panel.</p>
