<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Taverna Server 2.4.1 Administration Interface</title>
<link id="admin" href="admin" />
<script type="text/javascript" src="static/jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="static/jquery-ui-1.8.23.custom.min.js"></script>
<script type="text/javascript" src="static/admin.js"></script>
<link href="static/jquery-ui-1.8.23.custom.css" rel="stylesheet" type="text/css" />

</head>
<body>
<img height="70" style="float:left" src="static/t2cogs.png">
<h1>Taverna Server 2.4.1 Administration Interface <i>(prototype)</i></h1>
<br clear="left"/>
<div id="body">
<ul>
  <li><a href="#t-global">Global Settings</a></li>
  <li><a href="#t-users">Users</a></li>
  <li><a href="#t-usage">Usage Records</a></li>
  <li><a href="#t-worker">Local Worker Configuration</a></li>
</ul>
  
<div id="t-global">
<label for="invokationCount">Invokation Count:</label>
<span id="invokationCount">0</span>
<br>
<label for="runCount">Run Count:</label>
<span id="runCount">0</span>
<br>
<label for="startupTime">Back-End Startup Time (seconds):</label>
<span id="startupTime">0</span>
<br>
<label for="lastExitCode">Back-End Last Exit Code:</label>
<span id="lastExitCode"></span>
<p>
<label for="allowNew">Allow New Runs</label>
<input type="checkbox" id="allowNew" />
<label for="logWorkflows">Log Executed Workflows</label>
<input type="checkbox" id="logWorkflows" />
<label for="logFaults">Log User Exceptions</label>
<input type="checkbox" id="logFaults" />
<p>
<label for="runLimit">Maximum Simultaneous Workflow Runs</label>
<input id="runLimit" size="3" />
<br>
<label for="defaultLifetime">Default Run Lifetime (seconds)</label>
<input id="defaultLifetime" size="7" />
</div><!-- t-global -->

<div id="t-users">
<table id="userList">
  <tr><th>Username<th>System Username</tr>
</table>
<h3>Add a user</h3>
<table border=1>
  <tr>
    <td><label for="newUsername">Username</label>
    <td><input size=12 id="newUsername" />
  </tr>
  <tr>
    <td><label for="newPassword">Password</label>
    <td><input size=12 id="newPassword" type="password"/>
  </tr>
  <tr>
    <td><label for="newSysID">System ID</label>
    <td><input size=12 id="newSysID" />
  </tr>
  <tr><td colspan=2>
    <label for="newEnabled">Enabled</label>
    <input type="checkbox" id="newEnabled" />
    <label for="newAdmin">Admin</label>
    <input type="checkbox" id="newAdmin" />
  </td></tr>
  <tr><td colspan=2>
    <button id="makeNewUser">Create a new user</button>
  </td></tr>
</table>
</div><!-- t-users -->

<div id="t-usage">
Download <a href="#" id="ur">usage records</a> (warning: may be slow!)
<p>
<label for="usageRecordDumpFile">Usage Record Dump File</label>
<input id="usageRecordDumpFile" size="50" />
</div><!-- t-usage -->

<div id="t-worker">
  <div id="a-worker">

    <h3><a href="#">Subprocess Implementation Control</a></h3>
    <div>
      <table>
	<tr>
	  <td> <label for="javaBinary">Java Executable (for subprocesses):</label> </td>
	  <td> <input id="javaBinary" size="80" /> </td>
	</tr>
	<tr>
	  <td> <label for="serverForkerJar">Subprocess Factory JAR:</label> </td>
	  <td> <input id="serverForkerJar" size="80" /> </td>
	</tr>
	<tr>
	  <td> <label for="runasPasswordFile">File with password for sudo:</label> </td>
	  <td> <input id="runasPasswordFile" size="80" /> </td>
	</tr>
	<tr>
	  <td> <label for="serverWorkerJar">User Filesystem Access JAR:</label> </td>
	  <td> <input id="serverWorkerJar" size="80" /> </td>
	</tr>
	<tr>
	  <td> <label for="executeWorkflowScript">Workflow Engine Executable:</label> </td>
	  <td> <input id="executeWorkflowScript" size="80" /> </td>
	</tr>
      </table>
    </div>

    <h3><a href="#">Worker Registration Control</a></h3>
    <div>
      <label for="registryHost">Registry Host</label>
      <input id="registryHost" size="20" />
      <label for="registryPort">Port</label>
      <input id="registryPort" size="5" />
      <br>
      <label for="registrationWaitSeconds">Time to wait for registration (seconds)</label>
      <input id="registrationWaitSeconds" size="5" />
      <br>
      <label for="registrationPollMillis">Time to wait between polling to
      detect registration (milliseconds)</label>
      <input id="registrationPollMillis" size="5" />
    </div>

    <h3><a href="#">System User/Factory ID Mapping</a></h3>
    <div>
      <table id="factoryProcessMapping" border="1">
      </table>
    </div>

   	<h3><a href="#">Extra Arguments</a></h3>
   	<div>
   		<pre id="extraArguments">
   		</pre>
   	</div>

  </div><!-- a-worker -->
</div><!-- t-worker -->

</div>

<hr>
<address>Donal Fellows / University of Manchester</address>

<!-- DIALOG BOXES -->
<div id="dialog-confirm" title="Delete user?" style="display: none">
  <p>
  <span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>
  This user will be permanently deleted from the system. Are you sure?
  </p>
</div>

<div id="dialog-password" title="Change password?" style="display: none">
  <p>
  <span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>
  This will permanently change the user's password. Make sure you wish
  to do this.
  </p>
  <p>
  <input id="change-password" type="password" size="12" />
  </p>
</div>

</body>
</html>
