<?xml version="1.0" encoding="UTF-8"?>
<s:scufl xmlns:s="http://org.embl.ebi.escience/xscufl/0.1alpha" version="0.2" log="0">
  <s:workflowdescription lsid="urn:lsid:net.sf.taverna:wfDefinition:0" author="" title="" />
  <s:processor name="matching_criterion_yasmina" boring="true">
    <s:stringconstant>CC</s:stringconstant>
  </s:processor>
  <s:processor name="options_PFMatchICP" boring="true">
    <s:stringconstant>-chi2 25 -MinKeyNum 4</s:stringconstant>
  </s:processor>
  <s:processor name="scale_crestMatch" boring="true">
    <s:stringconstant>1.5</s:stringconstant>
  </s:processor>
  <s:processor name="options_PFRegister" boring="true">
    <s:stringconstant>-chi2 25</s:stringconstant>
  </s:processor>
  <s:processor name="method_to_test" boring="true">
    <s:stringconstant>xp</s:stringconstant>
  </s:processor>
  <s:processor name="trsf2yas_cmatch">
    <s:arbitrarywsdl>
      <s:wsdl>http://colors.unice.fr:80/trsf2yas_service.wsdl</s:wsdl>
      <s:operation>trsf2yas</s:operation>
    </s:arbitrarywsdl>
  </s:processor>
  <s:processor name="trsf2yas_PFRegister">
    <s:arbitrarywsdl>
      <s:wsdl>http://colors.unice.fr:80/trsf2yas_service.wsdl</s:wsdl>
      <s:operation>trsf2yas</s:operation>
    </s:arbitrarywsdl>
  </s:processor>
  <s:processor name="trsf2yas_yasmina">
    <s:arbitrarywsdl>
      <s:wsdl>http://colors.unice.fr:80/trsf2yas_service.wsdl</s:wsdl>
      <s:operation>trsf2yas</s:operation>
    </s:arbitrarywsdl>
  </s:processor>
  <s:processor name="AddRegResTrsfToFile_cmatch">
    <s:arbitrarywsdl>
      <s:wsdl>http://colors.unice.fr:80/AddRegResTrsfToFile_service.wsdl</s:wsdl>
      <s:operation>AddRegResTrsfToFile</s:operation>
    </s:arbitrarywsdl>
    <s:iterationstrategy>
      <i:cross xmlns:i="http://org.embl.ebi.escience/xscufliteration/0.1beta10">
        <i:iterator name="filename" />
        <i:dot>
          <i:iterator name="comment" />
          <i:iterator name="floating-image" />
          <i:iterator name="reference-image" />
          <i:iterator name="input-trsf" />
        </i:dot>
      </i:cross>
    </s:iterationstrategy>
  </s:processor>
  <s:processor name="registrateWithCrestMatch">
    <s:arbitrarywsdl>
      <s:wsdl>http://colors.unice.fr:80/cmatch_service.wsdl</s:wsdl>
      <s:operation>registrateWithCrestMatch</s:operation>
    </s:arbitrarywsdl>
    <s:iterationstrategy>
      <i:dot xmlns:i="http://org.embl.ebi.escience/xscufliteration/0.1beta10">
        <i:iterator name="reference" />
        <i:iterator name="floating" />
        <i:iterator name="crest-ref" />
        <i:iterator name="crest-float" />
        <i:iterator name="input-comment" />
      </i:dot>
    </s:iterationstrategy>
  </s:processor>
  <s:processor name="registrateWithPFRegister">
    <s:arbitrarywsdl>
      <s:wsdl>http://colors.unice.fr:80/PFRegister_service.wsdl</s:wsdl>
      <s:operation>registrateWithPFRegister</s:operation>
    </s:arbitrarywsdl>
    <s:iterationstrategy>
      <i:cross xmlns:i="http://org.embl.ebi.escience/xscufliteration/0.1beta10">
        <i:dot>
          <i:iterator name="reference" />
          <i:iterator name="floating" />
          <i:iterator name="ref-keys" />
          <i:iterator name="float-keys" />
          <i:iterator name="input-comment" />
        </i:dot>
        <i:iterator name="options" />
      </i:cross>
    </s:iterationstrategy>
  </s:processor>
  <s:processor name="PFMatchICP">
    <s:arbitrarywsdl>
      <s:wsdl>http://colors.unice.fr:80/PFMatchICP_service.wsdl</s:wsdl>
      <s:operation>PFMatchICP</s:operation>
    </s:arbitrarywsdl>
    <s:iterationstrategy>
      <i:cross xmlns:i="http://org.embl.ebi.escience/xscufliteration/0.1beta10">
        <i:dot>
          <i:iterator name="reference" />
          <i:iterator name="floating" />
          <i:iterator name="crest-ref" />
          <i:iterator name="crest-float" />
          <i:iterator name="init-trsf" />
          <i:iterator name="input-comment" />
        </i:dot>
        <i:iterator name="options" />
      </i:cross>
    </s:iterationstrategy>
  </s:processor>
  <s:processor name="AddRegResTrsfToFile_PFRegister">
    <s:arbitrarywsdl>
      <s:wsdl>http://colors.unice.fr:80/AddRegResTrsfToFile_service.wsdl</s:wsdl>
      <s:operation>AddRegResTrsfToFile</s:operation>
    </s:arbitrarywsdl>
    <s:iterationstrategy>
      <i:cross xmlns:i="http://org.embl.ebi.escience/xscufliteration/0.1beta10">
        <i:iterator name="filename" />
        <i:dot>
          <i:iterator name="comment" />
          <i:iterator name="floating-image" />
          <i:iterator name="reference-image" />
          <i:iterator name="input-trsf" />
        </i:dot>
      </i:cross>
    </s:iterationstrategy>
  </s:processor>
  <s:processor name="registrateWithYasmina">
    <s:arbitrarywsdl>
      <s:wsdl>http://colors.unice.fr:80/yasmina_service.wsdl</s:wsdl>
      <s:operation>registrateWithYasmina</s:operation>
    </s:arbitrarywsdl>
    <s:iterationstrategy>
      <i:cross xmlns:i="http://org.embl.ebi.escience/xscufliteration/0.1beta10">
        <i:dot>
          <i:iterator name="reference-image" />
          <i:iterator name="floating-image" />
          <i:iterator name="init-transformation" />
        </i:dot>
        <i:iterator name="matching-criterion" />
      </i:cross>
    </s:iterationstrategy>
  </s:processor>
  <s:processor name="MultiTransfoTest">
    <s:arbitrarywsdl>
      <s:wsdl>http://colors.unice.fr:80/MultiTransfoTest_service.wsdl</s:wsdl>
      <s:operation>MultiTransfoTest</s:operation>
    </s:arbitrarywsdl>
    <s:iterationstrategy>
      <i:cross xmlns:i="http://org.embl.ebi.escience/xscufliteration/0.1beta10">
        <i:iterator name="method" />
        <i:iterator name="input-file" />
      </i:cross>
    </s:iterationstrategy>
  </s:processor>
  <s:processor name="AddRegResTrsfToFile_yasmina">
    <s:arbitrarywsdl>
      <s:wsdl>http://colors.unice.fr:80/AddRegResTrsfToFile_service.wsdl</s:wsdl>
      <s:operation>AddRegResTrsfToFile</s:operation>
    </s:arbitrarywsdl>
    <s:iterationstrategy>
      <i:cross xmlns:i="http://org.embl.ebi.escience/xscufliteration/0.1beta10">
        <i:iterator name="filename" />
        <i:dot>
          <i:iterator name="comment" />
          <i:iterator name="floating-image" />
          <i:iterator name="reference-image" />
          <i:iterator name="input-trsf" />
        </i:dot>
      </i:cross>
    </s:iterationstrategy>
  </s:processor>
  <s:processor name="crestLines">
    <s:arbitrarywsdl>
      <s:wsdl>http://colors.unice.fr:80/crestLines_service.wsdl</s:wsdl>
      <s:operation>crestLines</s:operation>
    </s:arbitrarywsdl>
    <s:iterationstrategy>
      <i:cross xmlns:i="http://org.embl.ebi.escience/xscufliteration/0.1beta10">
        <i:iterator name="scale" />
        <i:iterator name="floating" />
        <i:iterator name="reference" />
      </i:cross>
    </s:iterationstrategy>
  </s:processor>
  <s:processor name="reference_image" boring="true">
    <s:stringconstant>llrd0301_T1i</s:stringconstant>
  </s:processor>
  <s:processor name="floating_image" boring="true">
    <s:stringconstant>llrd0701_T1i</s:stringconstant>
  </s:processor>
  <s:processor name="FileName" boring="true">
    <s:stringconstant>test_manchester.txt</s:stringconstant>
  </s:processor>
  <s:link source="trsf2yas_cmatch:result" sink="AddRegResTrsfToFile_cmatch:input-trsf" />
  <s:link source="crestLines:reference-image" sink="registrateWithCrestMatch:reference" />
  <s:link source="crestLines:floating-image" sink="registrateWithCrestMatch:floating" />
  <s:link source="crestLines:crest-reference-location" sink="registrateWithCrestMatch:crest-ref" />
  <s:link source="crestLines:crest-floating-location" sink="registrateWithCrestMatch:crest-float" />
  <s:link source="crestLines:comment" sink="registrateWithCrestMatch:input-comment" />
  <s:link source="registrateWithCrestMatch:result-real-transfo-location" sink="trsf2yas_cmatch:input-trsf" />
  <s:link source="registrateWithCrestMatch:reference-image" sink="AddRegResTrsfToFile_cmatch:reference-image" />
  <s:link source="registrateWithCrestMatch:floating-image" sink="AddRegResTrsfToFile_cmatch:floating-image" />
  <s:link source="registrateWithCrestMatch:comment" sink="AddRegResTrsfToFile_cmatch:comment" />
  <s:link source="crestLines:reference-image" sink="PFMatchICP:reference" />
  <s:link source="crestLines:floating-image" sink="PFMatchICP:floating" />
  <s:link source="crestLines:crest-reference-location" sink="PFMatchICP:crest-ref" />
  <s:link source="crestLines:crest-floating-location" sink="PFMatchICP:crest-float" />
  <s:link source="registrateWithCrestMatch:result-real-transfo-location" sink="PFMatchICP:init-trsf" />
  <s:link source="crestLines:comment" sink="PFMatchICP:input-comment" />
  <s:link source="PFMatchICP:reference-image" sink="registrateWithPFRegister:reference" />
  <s:link source="PFMatchICP:floating-image" sink="registrateWithPFRegister:floating" />
  <s:link source="PFMatchICP:reference-keys" sink="registrateWithPFRegister:ref-keys" />
  <s:link source="PFMatchICP:floating-keys" sink="registrateWithPFRegister:float-keys" />
  <s:link source="PFMatchICP:comment" sink="registrateWithPFRegister:input-comment" />
  <s:link source="registrateWithPFRegister:result-real-transfo-location" sink="trsf2yas_PFRegister:input-trsf" />
  <s:link source="registrateWithPFRegister:reference-image" sink="AddRegResTrsfToFile_PFRegister:reference-image" />
  <s:link source="registrateWithPFRegister:floating-image" sink="AddRegResTrsfToFile_PFRegister:floating-image" />
  <s:link source="registrateWithPFRegister:comment" sink="AddRegResTrsfToFile_PFRegister:comment" />
  <s:link source="trsf2yas_PFRegister:result" sink="AddRegResTrsfToFile_PFRegister:input-trsf" />
  <s:link source="registrateWithCrestMatch:reference-image" sink="registrateWithYasmina:reference-image" />
  <s:link source="registrateWithCrestMatch:floating-image" sink="registrateWithYasmina:floating-image" />
  <s:link source="registrateWithYasmina:result-real-transfo-location" sink="trsf2yas_yasmina:input-trsf" />
  <s:link source="registrateWithYasmina:reference-image" sink="AddRegResTrsfToFile_yasmina:reference-image" />
  <s:link source="registrateWithYasmina:floating-image" sink="AddRegResTrsfToFile_yasmina:floating-image" />
  <s:link source="registrateWithYasmina:comment" sink="AddRegResTrsfToFile_yasmina:comment" />
  <s:link source="trsf2yas_yasmina:result" sink="AddRegResTrsfToFile_yasmina:input-trsf" />
  <s:link source="registrateWithCrestMatch:result-real-transfo-location" sink="registrateWithYasmina:init-transformation" />
  <s:link source="MultiTransfoTest:rotation-rad" sink="accuracy_rotation_rad" />
  <s:link source="MultiTransfoTest:rotation-deg" sink="accuracy_rotation_deg" />
  <s:link source="MultiTransfoTest:translation-mm" sink="accuracy_translaition_mm" />
  <s:link source="scale_crestMatch:value" sink="crestLines:scale" />
  <s:link source="options_PFMatchICP:value" sink="PFMatchICP:options" />
  <s:link source="options_PFRegister:value" sink="registrateWithPFRegister:options" />
  <s:link source="matching_criterion_yasmina:value" sink="registrateWithYasmina:matching-criterion" />
  <s:link source="method_to_test:value" sink="MultiTransfoTest:method" />
  <s:link source="reference_image:value" sink="crestLines:reference" />
  <s:link source="floating_image:value" sink="crestLines:floating" />
  <s:link source="FileName:value" sink="AddRegResTrsfToFile_cmatch:filename" />
  <s:link source="FileName:value" sink="AddRegResTrsfToFile_PFRegister:filename" />
  <s:link source="FileName:value" sink="AddRegResTrsfToFile_yasmina:filename" />
  <s:link source="FileName:value" sink="MultiTransfoTest:input-file" />
  <s:sink name="accuracy_rotation_rad" />
  <s:sink name="accuracy_rotation_deg" />
  <s:sink name="accuracy_translaition_mm" />
  <s:coordination name="MultiTransfoTest_BLOCKON_AddRegResTrsfToFile_cmatch">
    <s:condition>
      <s:state>Completed</s:state>
      <s:target>AddRegResTrsfToFile_cmatch</s:target>
    </s:condition>
    <s:action>
      <s:target>MultiTransfoTest</s:target>
      <s:statechange>
        <s:from>Scheduled</s:from>
        <s:to>Running</s:to>
      </s:statechange>
    </s:action>
  </s:coordination>
  <s:coordination name="MultiTransfoTest_BLOCKON_AddRegResTrsfToFile_PFRegister">
    <s:condition>
      <s:state>Completed</s:state>
      <s:target>AddRegResTrsfToFile_PFRegister</s:target>
    </s:condition>
    <s:action>
      <s:target>MultiTransfoTest</s:target>
      <s:statechange>
        <s:from>Scheduled</s:from>
        <s:to>Running</s:to>
      </s:statechange>
    </s:action>
  </s:coordination>
  <s:coordination name="MultiTransfoTest_BLOCKON_AddRegResTrsfToFile_yasmina">
    <s:condition>
      <s:state>Completed</s:state>
      <s:target>AddRegResTrsfToFile_yasmina</s:target>
    </s:condition>
    <s:action>
      <s:target>MultiTransfoTest</s:target>
      <s:statechange>
        <s:from>Scheduled</s:from>
        <s:to>Running</s:to>
      </s:statechange>
    </s:action>
  </s:coordination>
</s:scufl>


