<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>SCUFL and Taverna Features</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link href="styles.css" rel="stylesheet" type="text/css">
</head>

<body>
<h1>Taverna internal architecture</h1>
<p><em>Version 0.1.beta6, 13<sup>th</sup> October 2003, <a href="mailto:tmo@ebi.ac.uk">tmo@ebi.ac.uk</a></em></p>
<blockquote><em>This document describes the internal flow of data within Taverna 
  during a workflow invocation.</em></blockquote>
<h2>execution flow</h2>
<blockquote>
  <p>A workflow invocation relies upon a previously instantiated workflow object 
    instance. From this instance, workflow tasks are constructed corresponding 
    to the processing entities within the workflow and also to the ports within 
    these processing entities. </p>
  <p>Why create workflow tasks for the ports? Some processing is done at ports, 
    such as the implicit wrapping of data where the dimensions of input and output 
    data mismatch, this allows, for example, a service that produces a single 
    string to act as input to one that expects an array of strings; in this case 
    the single string will be wrapped into a single element array and it is the 
    port task that accomplishes this.</p>
  <p>Overall, the data flow looks something like the following diagram.</p>
  <p><img src="taverna-process-flow.png" width="371" height="302"></p>
  <p>The first stage is the unbundling of the data document. This is accomplished 
    by the Baclava parser within Taverna, which converts the document into a Map 
    of DataThing objects; these are the internal data carrying unit within Taverna 
    and hold both the data and also any associated metadata such as MIME types, 
    mappings to terms in a descriptive ontology and a free text description. These 
    metadata are optional, and will be infered if absent in as much as it is possible 
    to do so.</p>
  <p>Once the core has access to this Map of DataThing objects, it is responsible 
    for employing the Taverna extensions to instantiate the appropriate port and 
    processor tasks and build them into a suitable call graph to represent the 
    workflow structure. Once this is complete, the enactor core schedules all 
    available tasks and feeds the initial data into the workflow source port tasks. 
    From this point on, everything happens pretty much as expected.</p>
  <p>Individual processor tasks consume a Map of DataThing objects corresponding 
    to the values of their named input ports, with the values being wrapped in 
    the DataThing objects and the names being used as keys into the supplied Map. 
    Similarly, after the processor task has performed its function, any results 
    are wrapped into DataThing objects and deposited into a return Map. The Baclava 
    model toolkit provides utility functions to wrap arbitrary objects and collections 
    thereof into DataThing wrappers and vice versa.</p>
  <p>Any given processing entity within the workflow may signal fault conditions 
    by throwing an appropriate exception, the enactor core catches these exceptions 
    and behaves appropriately, in almost all cases aborting subsequent processors 
    and marking the entire workflow as failed. In this case, only route 8b is 
    followed, a provenance report which should hopefully describe the error in 
    sufficient detail to allow diagnosis of the fault is generated, but no output 
    data are produced.</p>
  <p>If all processing entities in the workflow complete successfully, the workflow 
    is marked as complete; output data is produced in the same format as the data 
    document supplied to the input of the workflow along with a provenance trail 
    describing times and other invocation details of this workflow instance.</p>
</blockquote>
<p><a href="http://sourceforge.net"><img src="http://sourceforge.net/sflogo.php?group_id=74874&type=2" width="125" height="37" border="0" alt="SourceForge.net Logo" /></a></p>
</body>
</html>
