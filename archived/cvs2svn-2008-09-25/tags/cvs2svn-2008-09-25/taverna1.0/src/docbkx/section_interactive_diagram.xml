<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
"http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<section id="interactive_diagram">
  <title>Interactive Diagram</title>

  <para>This component provides a mechanism for building workflows by
  interacting directly with a graphical representation of the workflow model.
  </para>

  <para>This behaviour extends any previous behaviour, and all the abilities
  to interact with the model via the <link linkend="ame">Advanced Model
  Explorer</link> are still available. The original static <link
  linkend="workflow_diagram">graphical view</link> is also available through
  the "Graphical" tab - this can be useful for providing more detailed views
  of the workflow such as viewing the bound ports.</para>

  <section id="Interactive_add_processor">
    <title>Adding new processors to a workflow</title>

    <para>New processors can be added to the workflow model by dragging from
    the <link linkend="available_services">available services panel</link> directly onto
    the workflow canvas. The processor will assume the default name for that
    processor, but can be renamed by either double clicking and editing the
    name directly, or right-clicking and selecting "Rename".</para>

    <para>You can also still add new processors to the workflow by dragging to the
    Advanced Model Explorer or right-clicking and selecting "Add to model", or
    "Add to model with name".</para>
  </section>

  <section id="interactive_inputs_and_outputs">
    <title>Adding workflow inputs and outputs</title>

    <para>New inputs and outputs are added to the workflow by right-clicking a
    blank area of the diagram, and select "Create new Input ..." or "Create
    new Output ...". A dialogue box will then appear asking you to provide a
    name for the input or output - you must provide a unique name for this
    input or output.</para>

    <para>Once within the diagram, inputs and outputs can be distinguished
    from Processors by the small triangular icon that reflects the icon
    displayed in the Advanced Model Explorer. A small purple downward triangle
    denotes a workflow input, a small cyan upward arrow denotes a workflow
    output.</para>

    <screenshot>
      <screeninfo>Inputs and Outputs</screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="images/interactive_input_output.png" />
        </imageobject>
      </mediaobject>
    </screenshot>
  </section>

  <section id="interactive_connect_ports">
    <title>Connecting Data and Control links.</title>

    <para>Processors ports can be connected together with data links in either
    direction. When right-clicking on a Processor element, there is a menu
    option "Select port ..." that provides access to both the processors
    inputs or outputs. Once selected a draggable arrow appears which may be
    dragged to the Processor you wish to link to. If the Processor under the
    cursor accepts this link the arrow will "snap" to the Processor box - at
    this point simply release the mouse and a liist of available ports to
    connect to will appear. Once the required port is selected the link will
    be made. This action can be cancelled at any point by clicking on blank
    area of the canvas.</para>

    <para>To add a control link, right click on the Processor at the end of
    the link, select "Coordinate from ..." and then select the controlling
    Processor from the list.</para>
  </section>

  <section id="interactive_nested_workflows">
    <title>Nested workflows</title>

    <para>Within the Interactive Diagram nested workflows are not represented
    in their expanded state, but instead as a single processor coloured pink.
    A view of the expanded state is, however, still avialable through the
    static Graphical view.</para>

    <para>To edit a nested workflow, right-click on the nested workflow
    element and select the menu item "Edit Nested Workflow". This will open up
    the nested workflow in a new view allowing it to be manipulated just like
    any other workflow. The original parent workflow can be reselected via
    through the Taverna "Workflows" menu.</para>

    <screenshot>
      <screeninfo>Edit nested workflow</screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="images/interactive_nested_workflow.png" />
        </imageobject>
      </mediaobject>
    </screenshot>
  </section>

  <section>
    <title>Configuring processors</title>

    <para>Processors that require additional configuration, such as Beanshell
    or Biomoby processors, can be configured by right-clicking and selecting
    the appropriate menu item. These configure options are identical to
    configuring a processor in the Advanced Model Explorer.</para>

    <screenshot>
      <screeninfo>Configuring processors</screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="images/interactive_configure_beanshell.png" />
        </imageobject>
      </mediaobject>
    </screenshot>
  </section>

  <section id="interactive_remove_elements">
    <title>Removing Processors and Links</title>

    <para>Workflow elements can be removed from the model by right clicking on
    that element, and selecting "Remove from model" - the title of the menu
    identifies the element that would be removed. This applies to Processors,
    Workflow ports, Data links and Control links. If a Processor or Workflow
    port is removed, any connecting links are also automatically removed from
    the model.</para>

    <screenshot>
      <screeninfo>Removing links</screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="images/interactive_remove_item.png" />
        </imageobject>
      </mediaobject>
    </screenshot>
  </section>
</section>