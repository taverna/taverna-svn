<body>
 <h3>Contains built in Interaction Patterns.</h3>
 <p>Interaction patterns perform four distinct roles within the Interaction Server. Firstly they define the workflow side interface that Taverna then presents to the user, they implement the base InteractionPattern interface which declares a pattern name, free text description and named and typed inputs and outputs. These are then discovered dynamically and metadata served back to the workflow designed via the PatternServlet.</p>
 <p>To avoid tedious cut and paste coding you should probably subclass the AbstractServerInteractionPattern class and provide an appropriate XML metadata file alongside your implementation class, see the docs for that class for more details - this takes care of the pattern name, description and port name and type handling. </p>
 <p>When specialized by the ServerInteractionPattern interface these classes perform the following in addition to the base InteractionPattern role:</p>
 <ul>
   <li>Define the contents of an email sent to the target user when the interaction task is activated within a workflow.</li>
   <li>Handle requests from the client side interaction code for input data (unmarshalling it from the Taverna DataThing document form in which it resides on the interaction server)</li>
   <li>Handle data uploaded from the client side code, converting it into the XML DataThing document form and notifying the InteractionState object of completion or failure appropriately - note that the interaction server does not assume that a data upload means the completion of the interaction, this must be made explicit within the implementation of the ServerInteractionPattern interface.</li>
 </ul>
 <p>As an example, a multiple sequence editing plugin could be designed as follows:</p>
 <ul>
   <li>Construct the email to include a link back to a page on the interaction server (or elsewhere) which contains an Applet - probably a modified form of the Artemis sequence editor tool. This page would pass the session ID onto the Applet as an initialization parameter.</li>
   <li>Code the Applet such that it would contact the /client/download servlet for its initial sequence data when started</li>
   <li>Implement the handleInputDownload to parse the input.xml file on the server, extract a list of sequences and return them in a simpler form, possibly as a single FAST format file</li>
   <li>Code the Applet such that the user has a 'submit changes' button which contacts the /client/upload servlet and POSTs the modified FASTA file</li>
   <li>Implement the handleResultUpload method to parse the FAST file, create a new DataThing containing a list of strings holding the sequences and write this to the output file, messaging the state that it has completed. </li>
 </ul>
 <h3>Making new patterns available to the Interaction Server</h3>
 <p>The ServerInteractionPattern is a service provider interface (<strong>SPI</strong>), implementations of which may be discovered at runtime by the Interaction Server. To use this facility you must create a .jar file containing your compiled implementation classes along with a special services directory which tells the discovery API where to find your implementation. The structure inside the .jar therefore will look something like this:</p>
 <blockquote>
   <pre>impl.jar
       |-META-INF
       |        |-services
       |                 |-<strong>net.sf.taverna.interaction.server.ServerInteractionPattern</strong>
       |-org
           |-mydomain
                    | .... your implementation classes</pre>
 </blockquote>
 <p>The file shown in bold is a plain text file containing the full class name of your implementation - if you have more than one pattern you should have each class name on a seperate line in this file.</p>
 <p>This .jar file must then be made available to the Interaction Server, probably within the <strong>WEB-INF/lib</strong> directory within the generated .war archive. </p>
</body>