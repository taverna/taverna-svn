<?xml version="1.0" encoding="UTF-8"?>
<s:scufl xmlns:s="http://org.embl.ebi.escience/xscufl/0.1alpha" version="0.2" log="0">
  <s:workflowdescription lsid="urn:lsid:www.mygrid.org.uk:operation:1L4TNISR9T0" author="" title="" />
  <s:processor name="wsdl_address" boring="true">
    <s:stringconstant>http://rpc103.cs.man.ac.uk:8080/kave/services/KAVEPortType</s:stringconstant>
  </s:processor>
  <s:processor name="newline" boring="true">
    <s:stringconstant>*</s:stringconstant>
  </s:processor>
  <s:processor name="email" boring="true">
    <s:stringconstant>katy@bioinf.man.ac.uk</s:stringconstant>
  </s:processor>
  <s:processor name="issuer" boring="true">
    <s:stringconstant>University_of_Manchester</s:stringconstant>
  </s:processor>
  <s:processor name="concatenate">
    <s:local>org.embl.ebi.escience.scuflworkers.java.StringListMerge</s:local>
  </s:processor>
  <s:processor name="region" boring="true">
    <s:stringconstant>abs_diff { average:mean }</s:stringconstant>
  </s:processor>
  <s:processor name="group" boring="true">
    <s:stringconstant>abs_diff { average: first }</s:stringconstant>
  </s:processor>
  <s:processor name="normal" boring="true">
    <s:stringconstant>none {}</s:stringconstant>
  </s:processor>
  <s:processor name="suffix" boring="true">
    <s:stringconstant>.pnm</s:stringconstant>
  </s:processor>
  <s:processor name="shape" boring="true">
    <s:stringconstant>basic {aligner: align_similar_2d_min_modes: 0 ma_modes: 99 mode_prop: 0.95 }</s:stringconstant>
  </s:processor>
  <s:processor name="tex" boring="true">
    <s:stringconstant>sum_abs {}</s:stringconstant>
  </s:processor>
  <s:processor name="Concatenate_two_strings">
    <s:local>org.embl.ebi.escience.scuflworkers.java.StringConcat</s:local>
  </s:processor>
  <s:processor name="seperate_files" boring="true">
    <s:stringconstant>urn:lsid:www.mygrid.org.uk:mias_dicom:</s:stringconstant>
  </s:processor>
  <s:processor name="mergeTest" boring="true">
    <s:local>org.embl.ebi.escience.scuflworkers.java.StringListMerge</s:local>
  </s:processor>
  <s:processor name="blank" boring="true">
    <s:stringconstant />
  </s:processor>
  <s:processor name="Split_string_into_string_list_by_regular_expression" boring="true">
    <s:local>org.embl.ebi.escience.scuflworkers.java.SplitByRegex</s:local>
  </s:processor>
  <s:processor name="sendAnnotationForReview">
    <s:description>Review a single genome annotation flatfile (EMBL, GenBank, GFF etc.)</s:description>
    <s:defaults>
      <s:default name="emailAddress">tomoinn@gmail.com</s:default>
      <s:default name="title">title goes here</s:default>
      <s:default name="comment">some comment...</s:default>
    </s:defaults>
    <s:interaction>
      <s:baseurl>http://www.ebi.ac.uk/collab/mygrid/service1/interaction/</s:baseurl>
      <s:patternname>annotation.GenomeAnnotationFlatfile</s:patternname>
    </s:interaction>
  </s:processor>
  <s:processor name="performQuery">
    <s:arbitrarywsdl>
      <s:wsdl>http://rpc103.cs.man.ac.uk:8080/dicomPatientQuery/services/PatientQueryPortType?wsdl</s:wsdl>
      <s:operation>performQuery</s:operation>
    </s:arbitrarywsdl>
  </s:processor>
  <s:processor name="extractAnnotation">
    <s:arbitrarywsdl>
      <s:wsdl>http://rpc103.cs.man.ac.uk:8080/dicom-table-builder/services/PatientTableBuilderPortType?wsdl</s:wsdl>
      <s:operation>build</s:operation>
    </s:arbitrarywsdl>
  </s:processor>
  <s:processor name="collectData">
    <s:arbitrarywsdl>
      <s:wsdl>http://rpc103.cs.man.ac.uk:8080/dicom-repository/services/DicomStorePortType?wsdl</s:wsdl>
      <s:operation>dataToFile</s:operation>
    </s:arbitrarywsdl>
  </s:processor>
  <s:processor name="isbe">
    <s:arbitrarywsdl>
      <s:wsdl>http://rpc54.cs.man.ac.uk/gsoap/isbe_service.wsdl</s:wsdl>
      <s:operation>isbe</s:operation>
    </s:arbitrarywsdl>
  </s:processor>
  <s:processor name="isbe_new">
    <s:description>0.0.0.0.1.8811.2.9.20010413115754.12432.pnm</s:description>
    <s:arbitrarywsdl>
      <s:wsdl>http://rpc54.cs.man.ac.uk/gsoap/isbe_params_service.wsdl</s:wsdl>
      <s:operation>isbe-params</s:operation>
    </s:arbitrarywsdl>
  </s:processor>
  <s:processor name="Filter_list_of_strings_by_regex">
    <s:local>org.embl.ebi.escience.scuflworkers.java.FilterStringList</s:local>
  </s:processor>
  <s:processor name="String_Constant" boring="true">
    <s:stringconstant>0.0.0.0.1.8811.2.9.20010413115754.12432.pnm</s:stringconstant>
  </s:processor>
  <s:link source="Concatenate_two_strings:output" sink="Filter_list_of_strings_by_regex:stringlist" />
  <s:link source="Concatenate_two_strings:output" sink="collectData:fileName" />
  <s:link source="Filter_list_of_strings_by_regex:filteredlist" sink="isbe_new:image-list" />
  <s:link source="Filter_list_of_strings_by_regex:filteredlist" sink="test_filter" />
  <s:link source="Split_string_into_string_list_by_regular_expression:split" sink="mergeTest:stringlist" />
  <s:link source="String_Constant:value" sink="Filter_list_of_strings_by_regex:regex" />
  <s:link source="blank:value" sink="mergeTest:seperator" />
  <s:link source="concatenate:concatenated" sink="sendAnnotationForReview:annotation" />
  <s:link source="email:value" sink="sendAnnotationForReview:emailAddress" />
  <s:link source="extractAnnotation:buildReturn" sink="concatenate:stringlist" />
  <s:link source="group:value" sink="isbe_new:group-shape-objective-fn" />
  <s:link source="isbe_new:outputs" sink="isbe:input-file" />
  <s:link source="issuer:value" sink="performQuery:issuerId" />
  <s:link source="mergeTest:concatenated" sink="Concatenate_two_strings:string1" />
  <s:link source="newline:value" sink="concatenate:seperator" />
  <s:link source="normal:value" sink="isbe_new:image-normaliser" />
  <s:link source="patientId" sink="performQuery:patientId" />
  <s:link source="performQuery:performQueryReturn" sink="Split_string_into_string_list_by_regular_expression:string" />
  <s:link source="performQuery:performQueryReturn" sink="collectData:lsid" />
  <s:link source="performQuery:performQueryReturn" sink="extractAnnotation:lsid" />
  <s:link source="region:value" sink="isbe_new:region-model" />
  <s:link source="seperate_files:value" sink="Split_string_into_string_list_by_regular_expression:regex" />
  <s:link source="shape:value" sink="isbe_new:shape-model-builder" />
  <s:link source="suffix:value" sink="Concatenate_two_strings:string2" />
  <s:link source="Concatenate_two_strings:output" sink="mysteryout" />
  <s:link source="Split_string_into_string_list_by_regular_expression:split" sink="nameString" />
  <s:link source="isbe:outputs" sink="registration_results" />
  <s:link source="isbe_new:outputs" sink="parameterFile" />
  <s:link source="mergeTest:concatenated" sink="testMerge" />
  <s:link source="sendAnnotationForReview:reviewed_result" sink="annotation" />
  <s:link source="tex:value" sink="isbe_new:tex-res-fn" />
  <s:link source="wsdl_address:value" sink="performQuery:wsdlUrl" />
  <s:source name="patientId">
    <s:metadata>
      <s:description>123565</s:description>
    </s:metadata>
  </s:source>
  <s:sink name="annotation" />
  <s:sink name="registration_results" />
  <s:sink name="parameterFile" />
  <s:sink name="nameString" />
  <s:sink name="testMerge" />
  <s:sink name="mysteryout" />
  <s:sink name="test_filter" />
  <s:coordination name="collectData_BLOCKON_sendAnnotationForReview">
    <s:condition>
      <s:state>Completed</s:state>
      <s:target>sendAnnotationForReview</s:target>
    </s:condition>
    <s:action>
      <s:target>collectData</s:target>
      <s:statechange>
        <s:from>Scheduled</s:from>
        <s:to>Running</s:to>
      </s:statechange>
    </s:action>
  </s:coordination>
  <s:coordination name="Concatenate_two_strings_BLOCKON_sendAnnotationForReview">
    <s:condition>
      <s:state>Completed</s:state>
      <s:target>sendAnnotationForReview</s:target>
    </s:condition>
    <s:action>
      <s:target>Concatenate_two_strings</s:target>
      <s:statechange>
        <s:from>Scheduled</s:from>
        <s:to>Running</s:to>
      </s:statechange>
    </s:action>
  </s:coordination>
</s:scufl>


